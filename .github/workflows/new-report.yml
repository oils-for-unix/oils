name: Generate new report

on:
  workflow_dispatch:
    inputs:
      kind:
        type: choice
        description: What kind of report
        options: 
        - main
        - community
      base_report:
        required: true
         
jobs:
  aports-report:
    runs-on: ubuntu-22.04
    env:
      REPO_ROOT: ${{ github.workspace }}
      REGTEST_CAUSES_BASE_REPORT: ${{ inputs.base_report }}
      REGTEST_CAUSES_KIND: ${{ inputs.kind }}
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - name: aports-report
        run: |
          soil/github-actions.sh run-job aports-report podman
      - name: publish-html-logs
        run: |
          soil/github-actions.sh publish-and-exit aports-report T aports-report-
      # - name: publish-html
      #   run: |
      #     soil/github-actions.sh publish-and-exit dummy T



